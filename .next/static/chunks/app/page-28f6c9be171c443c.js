(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{72076:(e,s,t)=>{Promise.resolve().then(t.bind(t,87807))},87807:(e,s,t)=>{"use strict";t.d(s,{default:()=>eg});var r=t(23324),l=t(45744),a=t(2025),i=t(10450),n=t(51008),c=t(30341);function d(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.QP)((0,n.$)(s))}let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=l.forwardRef((e,s)=>{let{className:t,variant:l,size:i,asChild:n=!1,...c}=e,x=n?a.DX:"button";return(0,r.jsx)(x,{className:d(o({variant:l,size:i,className:t})),ref:s,...c})});x.displayName="Button";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});m.displayName="Card";let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("flex flex-col space-y-1.5 p-6",t),...l})});u.displayName="CardHeader";let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("text-2xl font-semibold leading-none tracking-tight",t),...l})});h.displayName="CardTitle",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("p-6 pt-0",t),...l})});j.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:d("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter";var f=t(17800);let p=f.bL,g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(f.B8,{ref:s,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});g.displayName=f.B8.displayName;let v=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(f.l9,{ref:s,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});v.displayName=f.l9.displayName;let b=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(f.UC,{ref:s,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});b.displayName=f.UC.displayName;var N=t(99929),y=t(94144),w=t(16797);let _=t(88730).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function C(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[t,r]=(0,l.useState)(null),[a,i]=(0,l.useState)(!0),[n,c]=(0,l.useState)(null),d=async()=>{try{i(!0),c(null);let s=await fetch("".concat(_).concat(e));if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let t=await s.json();r(t)}catch(e){c(e instanceof Error?e.message:"An error occurred"),console.error("API Error:",e)}finally{i(!1)}};return(0,l.useEffect)(()=>{d()},s),{data:t,loading:a,error:n,refetch:()=>d()}}async function k(){let e=await fetch("".concat(_,"/api/collision-scan"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}var S=t(21355),A=t(83149),D=t(43541);function L(e){let{summary:s,loading:t}=e;if(t)return(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(h,{className:"text-sm font-medium",children:"Loading..."})}),(0,r.jsx)(j,{children:(0,r.jsx)("div",{className:"h-8 bg-muted animate-pulse rounded"})})]},s))});let l=(null==s?void 0:s.data)||{};return(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(m,{children:[(0,r.jsxs)(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(h,{className:"text-sm font-medium",children:"Total Satellites"}),(0,r.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:l.total_satellites||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active objects in orbit"})]})]}),(0,r.jsxs)(m,{children:[(0,r.jsxs)(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(h,{className:"text-sm font-medium",children:"Collision Alerts"}),(0,r.jsx)(S.A,{className:"h-4 w-4 text-red-500"})]}),(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:l.collision_alerts||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Critical alerts"})]})]}),(0,r.jsxs)(m,{children:[(0,r.jsxs)(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(h,{className:"text-sm font-medium",children:"Space Debris"}),(0,r.jsx)(A.A,{className:"h-4 w-4 text-orange-500"})]}),(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:l.debris_count||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tracked debris objects"})]})]}),(0,r.jsxs)(m,{children:[(0,r.jsxs)(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(h,{className:"text-sm font-medium",children:"CDM Messages"}),(0,r.jsx)(D.A,{className:"h-4 w-4 text-blue-500"})]}),(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.cdm_count||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Conjunction messages"})]})]})]})}let O=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:s,variant:t,...l}=e;return(0,r.jsx)("div",{className:d(O({variant:t}),s),...l})}var R=t(39322);function F(e){let{alerts:s,loading:t}=e;if(t)return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsxs)(h,{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-5 w-5 text-red-500"}),"Critical Collision Alerts"]})}),(0,r.jsx)(j,{children:(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-16 bg-muted animate-pulse rounded"},s))})})]});let l=e=>{switch(null==e?void 0:e.toLowerCase()){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}};return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsxs)(h,{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-5 w-5 text-red-500"}),"Critical Collision Alerts (",s.length,")"]})}),(0,r.jsx)(j,{children:(0,r.jsx)("div",{className:"space-y-4",children:0===s.length?(0,r.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No critical alerts at this time"}):s.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T,{variant:l(e.risk_level),children:e.risk_level||"Unknown"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Alert #",e.id]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,r.jsx)(R.A,{className:"h-4 w-4"}),new Date(e.tca).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Objects:"})," ",e.sat_1_name," â†” ",e.sat_2_name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Min Range:"})," ",e.min_rng?"".concat(e.min_rng.toFixed(2)," km"):"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Collision Probability:"})," ",e.pc?"".concat((100*e.pc).toFixed(6),"%"):"N/A"]}),e.alert_reason&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Reason:"})," ",e.alert_reason]})]})]},e.id))})})]})}var P=t(66836);let E=l.forwardRef((e,s)=>{let{className:t,value:l,...a}=e;return(0,r.jsx)(P.bL,{ref:s,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:(0,r.jsx)(P.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});E.displayName=P.bL.displayName;var M=t(58833),z=t(44909),I=t(71078),B=t(4704),U=t(50461),V=t(4009);let H=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function K(e){let{stats:s,loading:t}=e;if(t)return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Satellite Distribution by Type"})}),(0,r.jsx)(j,{children:(0,r.jsx)("div",{className:"h-64 bg-muted animate-pulse rounded"})})]});if(!(null==s?void 0:s.data)||!s.data.by_type)return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Satellite Distribution by Type"})}),(0,r.jsx)(j,{children:(0,r.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No data available"})})]});let l=Object.entries(s.data.by_type).map(e=>{let[s,t]=e;return{name:s,value:t}}),a=s.data.total||l.reduce((e,s)=>{let{value:t}=s;return e+t},0);return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Satellite Distribution by Type"})}),(0,r.jsx)(j,{children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsx)("div",{className:"h-64",children:(0,r.jsx)(M.u,{width:"100%",height:"100%",children:(0,r.jsxs)(z.r,{children:[(0,r.jsx)(I.F,{data:l,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((e,s)=>(0,r.jsx)(B.f,{fill:H[s%H.length]},"cell-".concat(s)))}),(0,r.jsx)(U.m,{}),(0,r.jsx)(V.s,{})]})})}),(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(s.data.by_type).map((e,s)=>{let[t,l]=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:t}),(0,r.jsxs)("span",{children:[l," (",(l/a*100).toFixed(1),"%)"]})]}),(0,r.jsx)(E,{value:l/a*100,className:"h-2",style:{"--progress-background":H[s%H.length]}})]},t)})})]})})]})}let Y=l.forwardRef((e,s)=>{let{className:t,type:l,...a}=e;return(0,r.jsx)("input",{type:l,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});Y.displayName="Input";var G=t(32196),X=t(8202);function q(e){let{satellites:s,loading:t}=e,[a,i]=(0,l.useState)(""),[n,c]=(0,l.useState)(1),d=s.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.norad_id.toString().includes(a)),o=Math.ceil(d.length/10),f=(n-1)*10,p=d.slice(f,f+10),g=e=>{switch(e.toLowerCase()){case"payload":return"default";case"debris":return"destructive";case"rocket body":return"secondary";default:return"outline"}};return t?(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Satellites"})}),(0,r.jsx)(j,{children:(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-16 bg-muted animate-pulse rounded"},s))})})]}):(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsxs)(h,{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{children:["Satellites (",s.length,")"]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(G.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(Y,{placeholder:"Search satellites...",value:a,onChange:e=>i(e.target.value),className:"pl-8 w-64"})]})})]})}),(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.name}),(0,r.jsx)(T,{variant:g(e.object_type),children:e.object_type}),e.collision_alerts&&e.collision_alerts.length>0&&(0,r.jsxs)(T,{variant:"destructive",children:[e.collision_alerts.length," Alert",e.collision_alerts.length>1?"s":""]})]}),(0,r.jsxs)(x,{variant:"outline",size:"sm",children:[(0,r.jsx)(X.A,{className:"h-4 w-4 mr-1"}),"Details"]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"NORAD ID:"})," ",e.norad_id]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Source:"})," ",e.source||"N/A"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Created:"})," ",new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Updated:"})," ",new Date(e.updated_at).toLocaleDateString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"TLE Line 1:"})," ",e.tle_line1.substring(0,30),"..."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"TLE Line 2:"})," ",e.tle_line2.substring(0,30),"..."]})]})]})]},e.id))}),o>1&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4",children:[(0,r.jsx)(x,{variant:"outline",size:"sm",onClick:()=>c(e=>Math.max(e-1,1)),disabled:1===n,children:"Previous"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",o]}),(0,r.jsx)(x,{variant:"outline",size:"sm",onClick:()=>c(e=>Math.min(e+1,o)),disabled:n===o,children:"Next"})]})]})]})}var J=t(19291),Q=t(7708);let W=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(J.bL,{ref:s,className:d("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:(0,r.jsx)(J.C1,{className:d("flex items-center justify-center text-current"),children:(0,r.jsx)(Q.A,{className:"h-4 w-4"})})})});W.displayName=J.bL.displayName;var Z=t(31405),$=t(68922),ee=t(31317),es=t(67905),et=t(77591),er=t(6110),el=t(90554),ea=t(76136),ei=t(79873);function en(){let e=(0,l.useRef)(null),s=(0,ea.F)(ei.Tap,"/assets/3d/texture_earth.jpg");return(0,ea.C)((s,t)=>{e.current&&(e.current.rotation.y+=.1*t)}),(0,r.jsxs)("mesh",{ref:e,position:[0,0,0],children:[(0,r.jsx)("sphereGeometry",{args:[6.371,64,32]}),(0,r.jsx)("meshStandardMaterial",{map:s,roughness:.3,metalness:.4,emissive:2236962,emissiveIntensity:.2})]})}function ec(e){let{points:s,color:t,opacity:a=.8}=e,i=(0,l.useMemo)(()=>{let e=new ei.B6O(s.map(e=>new ei.Pq0(e.x,e.y,e.z)),!0);return new ei.j6(e,s.length,.02,8,!0)},[s]);return(0,r.jsx)("mesh",{geometry:i,children:(0,r.jsx)("meshBasicMaterial",{color:t,transparent:!0,opacity:a})})}var ed=t(62432);function eo(e){let{orbit:s,selected:t=!1,onClick:a,showLabel:i=!1}=e,n=(0,l.useRef)(null),{currentPosition:c,name:d,objectType:o}=s;(0,ea.C)(e=>{if(n.current){if(t){let s=1+.3*Math.sin(3*e.clock.elapsedTime);n.current.scale.setScalar(s)}else n.current.scale.setScalar(1)}});let x=()=>{switch(o.toLowerCase()){case"payload":return"#00ff00";case"debris":return"#ff4444";case"rocket body":return"#ffaa00";default:return"#ffffff"}},m=()=>{let e=t?.15:.08;switch(o.toLowerCase()){case"payload":return 1.2*e;case"debris":return .8*e;default:return e}};return(0,r.jsxs)("group",{position:[c.x,c.y,c.z],children:[(0,r.jsxs)("mesh",{ref:n,onClick:e=>{e.stopPropagation(),null==a||a()},onPointerOver:e=>{e.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:()=>{document.body.style.cursor="auto"},children:[(0,r.jsx)("sphereGeometry",{args:[m(),12,8]}),(0,r.jsx)("meshBasicMaterial",{color:x(),transparent:!0,opacity:t?1:.8,emissive:t?x():"#000000",emissiveIntensity:.2*!!t})]}),t&&(0,r.jsxs)("mesh",{children:[(0,r.jsx)("sphereGeometry",{args:[2*m(),12,8]}),(0,r.jsx)("meshBasicMaterial",{color:x(),transparent:!0,opacity:.1})]}),(t||i)&&(0,r.jsx)(ed.E,{position:[0,m()+.3,0],center:!0,distanceFactor:8,occlude:!0,children:(0,r.jsx)("div",{className:"bg-black/80 text-white px-2 py-1 rounded text-xs whitespace-nowrap pointer-events-none",children:d})})]})}var ex=t(66912),em=t(76504);function eu(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;return[e.x*s,e.z*s,-e.y*s]}function eh(e){let{satellite:s,onClose:t}=e;if(!s)return null;let l=function(e,s){try{em.jl(e,s);let t=Number.parseFloat(s.substring(8,16)),r=Number.parseFloat(s.substring(17,25)),l=Number.parseFloat("0."+s.substring(26,33)),a=Number.parseFloat(s.substring(34,42)),i=Number.parseFloat(s.substring(43,51)),n=Number.parseFloat(s.substring(52,63)),c=1440/n,d=Math.pow(1440/(2*n*Math.PI)*Math.sqrt(398600.4418),2/3);return{inclination:t.toFixed(2),raan:r.toFixed(2),eccentricity:l.toFixed(6),argOfPerigee:a.toFixed(2),meanAnomaly:i.toFixed(2),meanMotion:n.toFixed(8),period:c.toFixed(2),altitude:(d-6371).toFixed(2)}}catch(e){return console.error("Error getting orbital info:",e),null}}(s.tle_line1,s.tle_line2);return(0,r.jsx)("div",{className:"absolute top-4 right-4 w-80 z-10",children:(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(h,{className:"flex items-center gap-2 text-lg",children:[(0,r.jsx)(N.A,{className:"h-5 w-5"}),"Satellite Details"]}),(0,r.jsx)(x,{variant:"ghost",size:"sm",onClick:t,children:(0,r.jsx)(ex.A,{className:"h-4 w-4"})})]})}),(0,r.jsxs)(j,{className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-base truncate",title:s.name,children:s.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(T,{variant:(e=>{switch(e.toLowerCase()){case"payload":return"default";case"debris":return"destructive";case"rocket body":return"secondary";default:return"outline"}})(s.object_type),children:s.object_type}),s.collision_alerts&&s.collision_alerts.length>0&&(0,r.jsxs)(T,{variant:"destructive",className:"flex items-center gap-1",children:[(0,r.jsx)(S.A,{className:"h-3 w-3"}),s.collision_alerts.length," Alert",s.collision_alerts.length>1?"s":""]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"NORAD ID"}),(0,r.jsx)("p",{className:"font-mono font-medium",children:s.norad_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Source"}),(0,r.jsx)("p",{className:"font-medium",children:s.source||"N/A"})]})]}),l&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"Orbital Parameters"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Inclination"}),(0,r.jsxs)("p",{className:"font-mono",children:[l.inclination,"\xb0"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Altitude"}),(0,r.jsxs)("p",{className:"font-mono",children:[l.altitude," km"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Period"}),(0,r.jsxs)("p",{className:"font-mono",children:[l.period," min"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Eccentricity"}),(0,r.jsx)("p",{className:"font-mono",children:l.eccentricity})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"RAAN"}),(0,r.jsxs)("p",{className:"font-mono",children:[l.raan,"\xb0"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Arg. Perigee"}),(0,r.jsxs)("p",{className:"font-mono",children:[l.argOfPerigee,"\xb0"]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Created"}),(0,r.jsx)("p",{children:new Date(s.created_at).toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Last Updated"}),(0,r.jsx)("p",{children:new Date(s.updated_at).toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"TLE Data"}),(0,r.jsxs)("div",{className:"bg-muted p-2 rounded text-xs font-mono",children:[(0,r.jsx)("div",{className:"break-all",children:s.tle_line1}),(0,r.jsx)("div",{className:"break-all",children:s.tle_line2})]})]}),s.collision_alerts&&s.collision_alerts.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm text-red-600",children:"Active Alerts"}),(0,r.jsx)("div",{className:"space-y-2",children:s.collision_alerts.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 p-2 rounded text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)(T,{variant:"destructive",className:"text-xs",children:e.risk_level||"Unknown"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:new Date(e.tca).toLocaleDateString()})]}),(0,r.jsxs)("p",{className:"text-red-800",children:["vs ",e.sat_2_name]}),e.min_rng&&(0,r.jsxs)("p",{className:"text-red-700",children:["Min Range: ",e.min_rng.toFixed(2)," km"]})]},e.id))})]})]})]})})}function ej(e){let{satellites:s,selectedSatellite:t,onSatelliteSelect:a,visibleTypes:i,showOrbits:n,showLabels:c}=e,d=(0,l.useMemo)(()=>s.filter(e=>i.includes(e.object_type)),[s,i]),o=(0,l.useMemo)(()=>d.slice(0,100).map(e=>{let s=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;try{let r=em.jl(e,s),l=[],a=new Date;for(let e=0;e<t;e++){let s=new Date(a.getTime()+1296e5*e/t),i=em.gv(r,s);if(i.position&&"boolean"!=typeof i.position){let[e,t,r]=eu(i.position);l.push({x:e,y:t,z:r,timestamp:s.getTime()})}}return l}catch(e){return console.error("Error calculating orbit:",e),[]}}(e.tle_line1,e.tle_line2),t=function(e,s){try{let t=em.jl(e,s),r=new Date,l=em.gv(t,r);if(l.position&&"boolean"!=typeof l.position){let[e,s,t]=eu(l.position);return{x:e,y:s,z:t,timestamp:r.getTime()}}return null}catch(e){return console.error("Error calculating current position:",e),null}}(e.tle_line1,e.tle_line2);return{noradId:e.norad_id,name:e.name,objectType:e.object_type,points:s,currentPosition:t||{x:0,y:0,z:0,timestamp:Date.now()}}}).filter(e=>e.points.length>0),[d]),x=e=>{switch(e.toLowerCase()){case"payload":return"#00ff00";case"debris":return"#ff4444";case"rocket body":return"#ffaa00";default:return"#ffffff"}},m=e=>{let r=s.find(s=>s.norad_id===e);r&&a((null==t?void 0:t.norad_id)===e?null:r)};return(0,r.jsxs)("div",{className:"w-full h-full relative",children:[(0,r.jsxs)(et.Hl,{camera:{position:[20,20,20],fov:60},style:{background:"#000011"},onPointerMissed:()=>a(null),children:[(0,r.jsx)("ambientLight",{intensity:.7}),(0,r.jsx)("directionalLight",{position:[10,10,5],intensity:1.5}),(0,r.jsx)("directionalLight",{position:[-10,-10,-5],intensity:.5}),(0,r.jsx)(er.A,{radius:300,depth:60,count:2e4,factor:7,saturation:0}),(0,r.jsx)(en,{}),n&&o.map(e=>(0,r.jsx)(ec,{points:e.points,color:x(e.objectType),opacity:(null==t?void 0:t.noradId)===e.noradId?1:.4},e.noradId)),o.map(e=>(0,r.jsx)(eo,{orbit:e,selected:(null==t?void 0:t.norad_id)===e.noradId,showLabel:c,onClick:()=>m(e.noradId)},e.noradId)),(0,r.jsx)(el.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:10,maxDistance:100,maxPolarAngle:Math.PI})]}),(0,r.jsx)(eh,{satellite:t,onClose:()=>a(null)}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-black/70 text-white p-4 rounded-lg max-w-xs",children:[(0,r.jsx)("h3",{className:"font-bold mb-2",children:"3D Orbit View"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:["Objects: ",o.length]}),(0,r.jsxs)("div",{children:["Selected: ",t?t.name:"None"]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-1 text-xs",children:[(0,r.jsx)("div",{className:"text-muted-foreground mb-2",children:"Object Types:"}),i.includes("PAYLOAD")&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,r.jsx)("span",{children:"Payload"})]}),i.includes("DEBRIS")&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,r.jsx)("span",{children:"Debris"})]}),i.includes("ROCKET BODY")&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded"}),(0,r.jsx)("span",{children:"Rocket Body"})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-muted-foreground",children:[(0,r.jsx)("p",{children:"Click on objects to view details"}),(0,r.jsx)("p",{children:"Click empty space to deselect"})]})]})]})}let ef=["PAYLOAD","DEBRIS","ROCKET BODY","UNKNOWN"];function ep(e){let{satellites:s,loading:t}=e,[a,i]=(0,l.useState)(null),[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!0),[f,p]=(0,l.useState)(!0),[g,v]=(0,l.useState)(!1),[b,N]=(0,l.useState)(ef),y=(0,l.useMemo)(()=>[...new Set(s.map(e=>e.object_type))].sort(),[s]),w=s.filter(e=>b.includes(e.object_type)&&(e.name.toLowerCase().includes(n.toLowerCase())||e.norad_id.toString().includes(n))),_=e=>{N(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},C=e=>{switch(e.toLowerCase()){case"payload":return"default";case"debris":return"destructive";case"rocket body":return"secondary";default:return"outline"}};return t?(0,r.jsx)(m,{className:"h-[800px]",children:(0,r.jsx)(j,{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,r.jsx)("p",{children:"Loading orbital data..."})]})})}):(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 h-[800px]",children:[d&&(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsxs)(m,{className:"h-full",children:[(0,r.jsx)(u,{children:(0,r.jsxs)(h,{className:"flex items-center justify-between text-lg",children:["Controls",(0,r.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:(0,r.jsx)(Z.A,{className:"h-4 w-4"})})]})}),(0,r.jsxs)(j,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(G.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(Y,{placeholder:"Search satellites...",value:n,onChange:e=>c(e.target.value),className:"pl-8"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"Display Options"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(W,{checked:f,onCheckedChange:p}),"Show Orbit Paths"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(W,{checked:g,onCheckedChange:v}),"Show All Labels"]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h4",{className:"font-semibold text-sm flex items-center gap-1",children:[(0,r.jsx)($.A,{className:"h-4 w-4"}),"Object Types"]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{N(y)},className:"text-xs h-6 px-2",children:"All"}),(0,r.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{N([])},className:"text-xs h-6 px-2",children:"None"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:y.map(e=>({type:e,count:s.filter(s=>s.object_type===e).length,visible:b.includes(e)})).map(e=>{let{type:s,count:t,visible:l}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,r.jsx)(W,{checked:l,onCheckedChange:()=>_(s)}),(0,r.jsx)(T,{variant:C(s),className:"text-xs",children:s})]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:t})]},s)})})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2 border-t",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"Statistics"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Total Objects:"}),(0,r.jsx)("span",{children:s.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Visible:"}),(0,r.jsx)("span",{children:w.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Selected:"}),(0,r.jsx)("span",{children:a?a.name:"None"})]})]})]}),(0,r.jsx)("div",{className:"space-y-2 pt-2 border-t",children:(0,r.jsxs)(x,{variant:"outline",size:"sm",onClick:()=>i(null),disabled:!a,className:"w-full",children:[(0,r.jsx)(ee.A,{className:"h-4 w-4 mr-1"}),"Clear Selection"]})})]})]})}),(0,r.jsx)("div",{className:d?"col-span-9":"col-span-12",children:(0,r.jsxs)(m,{className:"h-full",children:[(0,r.jsx)(u,{className:"pb-2",children:(0,r.jsxs)(h,{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"3D Orbital Visualization"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[!d&&(0,r.jsxs)(x,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[(0,r.jsx)(es.A,{className:"h-4 w-4 mr-1"}),"Show Controls"]}),(0,r.jsxs)(T,{variant:"outline",children:[w.length," / ",s.length," Objects"]})]})]})}),(0,r.jsx)(j,{className:"p-0 h-[calc(100%-80px)]",children:(0,r.jsx)(ej,{satellites:s,selectedSatellite:a,onSatelliteSelect:i,visibleTypes:b,showOrbits:f,showLabels:g})})]})})]})}function eg(){let[e,s]=(0,l.useState)(!1),[t,a]=(0,l.useState)(""),{data:i,loading:n,refetch:c}=C("/api/summary"),{data:d,loading:o,refetch:f}=C("/api/satellites/stats"),{data:_,loading:S,refetch:A}=C("/api/collision-alerts"),{data:D,loading:O,refetch:T}=C("/api/satellites"),{data:R,loading:P}=C("/api/top-collision"),E=async()=>{try{s(!0);let e=await k();a(e.message),setTimeout(()=>{c(),A(),f()},2e3)}catch(e){a("Error triggering collision scan")}finally{s(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"h-8 w-8 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Orryx Space Situational Awareness"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Advanced Satellite Tracking & Collision Detection System"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(x,{onClick:()=>{c(),f(),A(),T()},variant:"outline",size:"sm",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-1"}),"Refresh"]}),(0,r.jsxs)(x,{onClick:E,disabled:e,size:"sm",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-1"}),e?"Scanning...":"Trigger Scan"]})]})]}),t&&(0,r.jsx)("div",{className:"mt-2 p-2 bg-muted rounded text-sm",children:t})]})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(L,{summary:i,loading:n})}),(0,r.jsxs)(p,{defaultValue:"overview",className:"space-y-4",children:[(0,r.jsxs)(g,{children:[(0,r.jsx)(v,{value:"overview",children:"Overview"}),(0,r.jsx)(v,{value:"satellites",children:"Satellites"}),(0,r.jsx)(v,{value:"alerts",children:"Collision Alerts"}),(0,r.jsx)(v,{value:"orbits",children:"3D Orbits"}),(0,r.jsx)(v,{value:"debris",children:"Debris"})]}),(0,r.jsxs)(b,{value:"overview",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsx)(F,{alerts:(null==_?void 0:_.data)||[],loading:S}),(0,r.jsx)(K,{stats:d,loading:o})]}),(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Top Collision Risks"})}),(0,r.jsx)(j,{children:P?(0,r.jsx)("div",{className:"h-32 bg-muted animate-pulse rounded"}):(0,r.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,r.jsx)("p",{children:"Top collision data will be displayed here"}),(0,r.jsxs)("p",{className:"text-sm",children:["Data structure: ",JSON.stringify(R,null,2)]})]})})]})]}),(0,r.jsx)(b,{value:"satellites",children:(0,r.jsx)(q,{satellites:(null==D?void 0:D.data)||[],loading:O})}),(0,r.jsx)(b,{value:"alerts",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(F,{alerts:(null==_?void 0:_.data)||[],loading:S})})}),(0,r.jsx)(b,{value:"debris",children:(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:"Space Debris Tracking"})}),(0,r.jsx)(j,{children:(0,r.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Debris tracking interface will be implemented here using the /api/debris endpoints"})})]})}),(0,r.jsx)(b,{value:"orbits",children:(0,r.jsx)(ep,{satellites:(null==D?void 0:D.data)||[],loading:O})})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[755,683,269,809,110,167,358],()=>s(72076)),_N_E=e.O()}]);